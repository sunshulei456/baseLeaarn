

# 接口描述

```
crm的输入和输出接口
1.ERP-MDM-0001
输入：客户目标调用地址：http://192.168.188.32:53258/WebService.asmx?op=CallErpWebService
输出：    加工调用地址：http://192.168.188.206/uapws/rest/meike/mdmCustomer/receiveCustomer
2.ERP-MDM-0002
输入： 供应商目标调用地址：http://192.168.188.32:53258/WebService.asmx?op=CallErpWebService
输出:      加工调用地址： http://192.168.188.206/uapws/rest/meike/mdmSupplier/receiveSupplier

```



# ERP-MDM-0001 -- 客户



## 报文属性 -- 死数据

```
	
---- 接口文档的报文信息	
"InterfaceType": "MDM0004",
"MessageId": "------",    
"CompanyCode": "SHMK",  
"AuthorizedCode": "S09738Rs#99#",
"InterfaceUser": "TestUser",	




=====
系统推送的数据字段
    "systemCode": "ERP-MDM-0001", 
    "mdType": "Maincuster", 
    "action": "distribute_manual", 
    "distributeToken": "", 
}


 
```

## 报文属性 -- 映射信息

```json
===
前面属性信息

	InterfaceType", InterfaceType   == MDM0004
	MessageId", UUID.randomUUID()   == 
	CompanyCode", CompanyCode       == SHMK
	AuthorizedCode",AuthorizedCode  == S09738Rs#99#
	InterfaceUser",InterfaceUser    == "TestUser
		
	
====
CustTable  <----   masterData
$.CustTable        $.masterData


====
masterData 中的数组


"AccountNum", bd_customer_code
"NCCCustAccount", bd_customer_def2
"CustName", bd_customer_name
"TaxID", taxpayerid
"SalesClassification", CustClassificationId
==== "CustGroup", CustGroup
==== "CustClassificationId", CustClassificationId
==== "InvoiceAccount", InvoiceAccount
"CustClassification", pk_custclass
"Currency", pk_currtype_@currency_id
==== "LanguageId", LanguageId
"InclTax", pk_custtaxes
"TaxGroup", CustomerTaxRate_name
"enablestate", enablestate		
==== "dr", dr

----------------------------
$.CustTable[*].
$.CustTable[*].AccountNum  <----  $.CustTable[*].bd_customer_code
$.CustTable[*].NCCCustAccount  <----  $.CustTable[*].bd_customer_def2
$.CustTable[*].CustName  <----  $.CustTable[*].bd_customer_name
$.CustTable[*].TaxID  <----  $.CustTable[*].taxpayerid
$.CustTable[*].SalesClassification  <----  $.CustTable[*].CustClassificationId
==== $.CustTable[*].CustGroup  <----  $.CustTable[*].CustGroup
==== $.CustTable[*].CustClassificationId  <----  $.CustTable[*].CustClassificationId
==== $.CustTable[*].InvoiceAccount  <----  $.CustTable[*].InvoiceAccount
$.CustTable[*].CustClassification  <----  $.CustTable[*].pk_custclass
$.CustTable[*].Currency  <----  $.CustTable[*].pk_currtype_@currency_id
==== $.CustTable[*].LanguageId  <----  $.CustTable[*].LanguageId
$.CustTable[*].InclTax  <----  $.CustTable[*].pk_custtaxes
$.CustTable[*].TaxGroup  <----  $.CustTable[*].CustomerTaxRate_name
$.CustTable[*].enablestate  <----  $.CustTable[*].enablestate		
==== $.CustTable[*].dr  <----  $.CustTable[*].dr

=========================================================


数组： 客户银行格式转换

"BankName", bd_bankdoc_name
"AccountNum", accnum
"Currency", bd_currtype_name_@currency_id
"dr", dr
"MDMID", pk_mdm

$.CustTable[*].sub_CustBankAccount    $.CustTable[*].sub_Cust_Bank
$.CustTable[*].sub_CustBankAccount[*].

	
$.CustTable[*].sub_CustBankAccount[*].BankName  <----  $.CustTable[*].sub_CustBankAccount[*].bd_bankdoc_name
$.CustTable[*].sub_CustBankAccount[*].AccountNum  <----  $.CustTable[*].sub_CustBankAccount[*].accnum
$.CustTable[*].sub_CustBankAccount[*].Currency  <----  $.CustTable[*].sub_CustBankAccount[*].bd_currtype_name_@currency_id
===== dr  <----  $.CustTable[*].sub_CustBankAccount[*].dr
$.CustTable[*].sub_CustBankAccount[*].MDMID  <----  $.CustTable[*].sub_CustBankAccount[*].pk_mdm


=========================================================

数组： 客户地址格式转换


==== "AddressType", AddressType
==== "CountryRegionId", CountryRegionId
==== "State", State
==== "County", County
==== "City", City
==== "Street", Street
==== "dr", dr1
"MDMID", pk_mdm

-------------------------
$.CustTable[*].
$.CustTable[*].sub_CustAddress			$.CustTable[*].sub_Cust_address
$.CustTable[*].sub_CustAddress[*].

$.CustTable[*].sub_CustAddress[*].MDMID  <----  $.CustTable[*].sub_CustAddress[*].pk_mdm



=========================================================

数组： 客户联系格式转换
 
$.CustTable[*].sub_CustContact			$.CustTable[*].sub_cust_contact

"Email", "5922@qq.com"
"ContactPersonName", name
"Title", bd_linkman_vjob
"Phone", bd_linkman_phone
"CellularPhone", bd_linkman_cell
==== "dr", dr1
"MDMID", pk_mdm

-----------------------------------------------------------

$.CustTable[*].
$.CustTable[*].sub_CustContact			$.CustTable[*].sub_cust_contact
$.CustTable[*].sub_CustContact[*].


$.CustTable[*].sub_CustContact[*].Email    <----  5922@qq.com
$.CustTable[*].sub_CustContact[*].ContactPersonName    <----  $.CustTable[*].sub_CustContact[*].name
$.CustTable[*].sub_CustContact[*].Title    <----  $.CustTable[*].sub_CustContact[*].bd_linkman_vjob
$.CustTable[*].sub_CustContact[*].Phone    <----  $.CustTable[*].sub_CustContact[*].bd_linkman_phone
$.CustTable[*].sub_CustContact[*].CellularPhone    <----  $.CustTable[*].sub_CustContact[*].bd_linkman_cell
==== $.CustTable[*].sub_CustContact[*].dr    <----  $.CustTable[*].sub_CustContact[*].dr1
$.CustTable[*].sub_CustContact[*].MDMID    <----  $.CustTable[*].sub_CustContact[*].pk_mdm


=========================================================



```



# ERP-MDM-0002 -- 商户



## 报文属性 -- 报文属性

```
	
---- 接口文档的报文信息	
"InterfaceType": "MDM0005",
"MessageId": "------",    
"CompanyCode": "CJGS",  
"AuthorizedCode": "K04283Kz#68#",
"InterfaceUser": "TestUser",	




=====
系统推送的数据字段
    "systemCode": "ERP-MDM-0002", 
    "mdType": "Mainsupplier", 
    "action": "distribute_manual", 
    "distributeToken": ""
}
```



## 报文属性 -- 映射信息

```json
 
{

	
	
	=====
	
---- 接口文档的报文信息	
"InterfaceType": "MDM0005",
"MessageId": "------",    
"CompanyCode": "CJGS",  
"AuthorizedCode": "K04283Kz#68#",
"InterfaceUser": "TestUser",	




=====
系统推送的数据字段
    "systemCode": "ERP-MDM-0002", 
    "mdType": "Mainsupplier", 
    "action": "distribute_manual", 
    "distributeToken": ""
}


masterData 名称修改
$.VendTable       $.masterData

 


masterData 数组
{
=================================================================	
  
	
	
	"AccountNum"  ----  MainSupplierCode
	"NCCVendAccount"  ----  NCCSupplierCode
	"VendName"  ----  MainSupplierName
	==== "VendGroup"  ----  VendGroup
	==== "InvoiceAccount"  ----  InvoiceAccount
	"UniformSocialCreditCode"  ----  UnifiedSocialCredit
	"Currency"  ----  Currency_@currency_id
	==== "LanguageId"  ----  LanguageId
	"InclTax"  ----  SupplierTax
	"TaxGroup"  ----  SupplierTaxRate
	==== "enablestate"  ----  enablestate
	"SupplyGrade"  ----  SupplyLevel
	"PerformanceGrade"  ----  Performancelevel
	"SupplyScope"  ----  ScopeSupply
	==== "dr"  ----  dr

------------------------------------------

每个 metadata 中的数据 
$.VendTable[*].


$.VendTable[*].AccountNum    <----------     $.VendTable[*].MainSupplierCode
$.VendTable[*].NCCVendAccount    <----------     $.VendTable[*].NCCSupplierCode
$.VendTable[*].VendName    <----------     $.VendTable[*].MainSupplierName
	==== "VendGroup    <----------     $.VendTable[*].VendGroup
	==== "InvoiceAccount    <----------     $.VendTable[*].InvoiceAccount
$.VendTable[*].UniformSocialCreditCode    <----------     $.VendTable[*].UnifiedSocialCredit
$.VendTable[*].Currency    <----------     $.VendTable[*].Currency_@currency_id
	==== "LanguageId    <----------     $.VendTable[*].LanguageId
$.VendTable[*].InclTax    <----------     $.VendTable[*].SupplierTax
$.VendTable[*].TaxGroup    <----------     $.VendTable[*].SupplierTaxRate
	==== "enablestate    <----------     $.VendTable[*].enablestate
$.VendTable[*].SupplyGrade    <----------     $.VendTable[*].SupplyLevel
$.VendTable[*].PerformanceGrade    <----------     $.VendTable[*].Performancelevel
$.VendTable[*].SupplyScope    <----------     $.VendTable[*].ScopeSupply
	==== "dr    <----------     $.VendTable[*].dr	

=================================================================



	// 数组 供应商银行格式转换
	sub_VendBankAccount ---- sub_supplier_Bank
	{
		"MDMID"  ----  pk_mdm			
		"BankName"  ----  bank
		"AccountNum"  ----  BankAccount
		"Currency"  ----  currency_@currency_id
		====  "dr"  ----  dr
 
	}
	
	-----------------------
	
$.VendTable[*].sub_VendBankAccount      $.VendTable[*].sub_supplier_Bank
	
$.VendTable[*].sub_VendBankAccount[*].	
$.VendTable[*].sub_VendBankAccount[*].MDMID    <----------     $.VendTable[*].sub_VendBankAccount[*].pk_mdm	
$.VendTable[*].sub_VendBankAccount[*].BankName    <----------     $.VendTable[*].sub_VendBankAccount[*].bank
$.VendTable[*].sub_VendBankAccount[*].AccountNum    <----------     $.VendTable[*].sub_VendBankAccount[*].BankAccount
$.VendTable[*].sub_VendBankAccount[*].Currency    <----------     $.VendTable[*].sub_VendBankAccount[*].currency_@currency_id
====  $.VendTable[*].sub_VendBankAccount[*].dr    <----------     $.VendTable[*].sub_VendBankAccount[*].dr

	
	
	
=================================================================


	
	// 数组 供应商地址格式转换
	sub_VendAddress ---- sub_Supplier_address
	{
		====  "AddressType"  ----  AddressType
		====  "CountryRegionId"  ----  CountryRegionId
		====  "State"  ----  State
		====  "County"  ----  County
		====  "City"  ----  City
		====  "Street"  ----  Street
		====  "dr"  ----  dr
		"MDMID"  ----  pk_mdm
	}

$.VendTable[*].sub_VendAddress      $.VendTable[*].sub_Supplier_address
$.VendTable[*].sub_VendAddress[*].MDMID   $.VendTable[*].sub_VendAddress[*].pk_mdm

=================================================================



	// 数组： 供应商联系格式转换
	sub_VendContact ---- sub_supplier_contact
	{
		"ContactPersonName"  ==== Name
		"Title"  ==== Post
		"Phone"  ==== landline
		"CellularPhone"  ==== phone
		"Email"  ==== Mail
		====  "dr"  ==== dr
		"MDMID"  ==== pk_mdm
	}
	
	
----------------------

$.VendTable[*].sub_VendContact      $.VendTable[*].sub_supplier_contact
$.VendTable[*].sub_VendContact[*].

$.VendTable[*].sub_VendContact[*].ContactPersonName    <----------     $.VendTable[*].sub_VendContact[*].Name
$.VendTable[*].sub_VendContact[*].Title    <----------     $.VendTable[*].sub_VendContact[*].Post
$.VendTable[*].sub_VendContact[*].Phone    <----------     $.VendTable[*].sub_VendContact[*].landline
$.VendTable[*].sub_VendContact[*].CellularPhone    <----------     $.VendTable[*].sub_VendContact[*].phone
$.VendTable[*].sub_VendContact[*].Email    <----------     $.VendTable[*].sub_VendContact[*].Mail
		====  "dr    <----------     $.VendTable[*].sub_VendContact[*].dr
$.VendTable[*].sub_VendContact[*].MDMID    <----------     $.VendTable[*].sub_VendContact[*].pk_mdm

	
	
}

```

